# Mini 语言词法分析器 - 项目概览

## 📁 目录结构说明

```
Lexical-Analyzer/
├── src/                      # 源代码目录
│   └── lexical_analyzer.py   # 词法分析器核心实现（~400行）
├── tests/                    # 测试用例目录
│   ├── test_correct.mini     # 正确程序示例
│   ├── test_error.mini       # 错误检测示例
│   ├── test_comment.mini     # 注释处理示例
│   └── test_operators.mini   # 运算符测试示例
├── outputs/                  # 输出结果目录
│   ├── output_correct.txt    # 正确程序分析结果
│   ├── output_error.txt      # 错误程序分析结果
│   └── output_comment.txt    # 注释程序分析结果
├── docs/                     # 文档目录
│   ├── 实验报告.md           # 详细实验报告
│   └── 项目概览.md           # 本文档
├── .gitignore               # Git 忽略文件配置（递归忽略所有临时文件）
├── CHANGELOG.md             # 版本更新日志
├── run_tests.sh             # 批量测试脚本
├── clean.sh                 # 项目清理脚本
└── README.md                # 项目说明文档
```

## 🚀 快速开始

### 方法一：单个文件测试

```bash
python src/lexical_analyzer.py tests/test_correct.mini outputs/result.txt
```

### 方法二：批量测试（推荐）

```bash
./run_tests.sh
```

## 📂 各目录说明

### src/ - 源代码

- **lexical_analyzer.py**：词法分析器主程序
  - `TokenType`：Token 类型枚举
  - `Token`：Token 类
  - `SymbolEntry`：符号表条目
  - `ConstantEntry`：常数表条目
  - `LexicalAnalyzer`：词法分析器主类

### tests/ - 测试用例

所有测试文件均以 `.mini` 为扩展名，使用 `#` 作为程序结束符。

| 文件                | 用途         | 特点                    |
| ------------------- | ------------ | ----------------------- |
| test_correct.mini   | 正确程序测试 | 包含所有基本语法元素    |
| test_error.mini     | 错误检测测试 | 包含非法字符 @, !, $    |
| test_comment.mini   | 注释处理测试 | 包含单行和多行块注释    |
| test_operators.mini | 运算符测试   | 测试所有单/双字符运算符 |

### outputs/ - 输出结果

存放词法分析的输出结果，包含：

- Token 序列
- 符号表
- 常数表
- 错误信息（如有）

### docs/ - 文档

- **实验报告.md**：完整的实验报告，包含理论设计和实现说明
- **项目概览.md**：本文档，快速了解项目结构

## 🔧 开发与维护

### 添加新测试用例

1. 在 `tests/` 目录下创建 `.mini` 文件
2. 编写测试代码，以 `#` 结尾
3. 运行：`python src/lexical_analyzer.py tests/新文件.mini outputs/输出.txt`

### 修改词法规则

编辑 `src/lexical_analyzer.py`：

- 修改 `TokenType` 枚举：添加新的 Token 类型
- 修改 `keywords` 字典：添加新关键字
- 修改 `get_next_token()` 方法：添加新的识别逻辑

### 代码规范

- Python 3.6+
- PEP 8 代码风格
- 类型提示（Type Hints）
- 详细的注释和文档字符串

### 清理临时文件

项目已配置 `.gitignore` 递归忽略所有目录下的临时文件：

```bash
# 运行清理脚本
./clean.sh
```

**自动忽略的文件类型**：

- **macOS 系统文件**：`**/.DS_Store`、`._*`、`.AppleDouble`、`.LSOverride`
- **Python 缓存**：`__pycache__/`、`*.pyc`、`*.pyo`、`*.py[cod]`
- **IDE 临时文件**：`.vscode/`、`.idea/`、`*.swp`、`*.swo`
- **临时文件**：`*.tmp`、`*.bak`、`*.log`、`*~`
- **虚拟环境**：`venv/`、`env/`、`.venv`

**注意**：`**/.DS_Store` 使用双星号模式，可以递归匹配所有子目录中的 `.DS_Store` 文件。

## 📊 项目统计

| 项目       | 数量/信息 |
| ---------- | --------- |
| 代码行数   | ~400 行   |
| Token 类型 | 25 种     |
| 关键字     | 5 个      |
| 运算符     | 11 个     |
| 界限符     | 6 个      |
| 测试用例   | 4 个      |
| 文档       | 3 个      |

## 🎯 功能特性

- ✅ 完整的 DFA 词法分析
- ✅ 符号表和常数表管理
- ✅ 块注释处理 `/* ... */`
- ✅ 错误检测与定位
- ✅ 位置跟踪（行号、列号）
- ✅ 文件输入输出
- ✅ 批量测试脚本

## 📝 后续迭代建议

### 功能扩展

1. **支持更多数据类型**：浮点数、字符串、字符
2. **支持单行注释**：`// ...`
3. **支持更多关键字**：`for`, `switch`, `case`, `break`, `continue`
4. **支持更多运算符**：`++`, `--`, `+=`, `-=`, `&&`, `||`, `!`

### 性能优化

1. **符号表优化**：使用哈希表替代线性查找
2. **缓冲区优化**：实现双缓冲输入机制
3. **并发处理**：支持多文件并发分析

### 工具集成

1. **单元测试**：添加 pytest 测试框架
2. **持续集成**：配置 CI/CD 流程
3. **代码覆盖率**：使用 coverage.py
4. **性能分析**：使用 cProfile

### 用户体验

1. **图形界面**：开发 GUI 版本
2. **Web 版本**：在线词法分析工具
3. **IDE 插件**：VSCode/PyCharm 插件
4. **语法高亮**：支持 Mini 语言语法高亮

## 🔗 相关文档

- [README.md](../README.md) - 项目使用说明
- [实验报告.md](./实验报告.md) - 详细实验报告
- [lexical_analyzer.py](../src/lexical_analyzer.py) - 源代码

## 📞 维护信息

- **项目类型**：编译原理实习项目
- **开发语言**：Python 3
- **依赖库**：无（纯 Python 标准库）
- **许可证**：MIT License

---

**最后更新**：2024 年
**版本**：1.0.0
